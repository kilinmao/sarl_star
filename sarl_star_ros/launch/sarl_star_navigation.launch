<launch>
<!--  -->
  <!-- Define laser type-->
  <!-- <arg name="laser_type" default="hokuyo" /> -->

 <!-- <param name="/use_sim_time" value="true"/> -->

  <!-- laser driver -->
  <!-- <include file="$(find turtlebot_navigation)/laser/driver/$(arg laser_type)_laser.launch" /> -->

  <!-- laser filter (optional) -->
  <!-- <node pkg="laser_filters" type="scan_to_scan_filter_chain"
      name="laser_filter">
    <rosparam command="load" file="$(find laser_filters)/laserscan_filter.yaml" />
  </node> -->

   <!-- Map parameters -->
  <arg name="map_file"        default="map1"/>
  <arg name="map_path"        default="$(find simulator_setup)/maps/$(arg map_file)/map.yaml"/>
  <arg name="world_path"      default="$(find simulator_setup)/maps/$(arg map_file)/map.world.yaml"/>

  <arg name="global_frame_id"   value="map"/>
  <arg name="odom_frame_id"     value="odom"/>
  <arg name="base_frame_id"     value="base_footprint"/>
  
  <arg name="odom_ground_truth" default="/odometry/ground_truth"/>

  <!-- Map server -->
  <!-- <arg name="map_file" default="sarl_star_ros/map/wangtong.yaml"/>
  <node name="map_server" pkg="map_server" type="map_server" args="$(arg map_file)" /> -->
  <node name="map_server" pkg="map_server" type="map_server" args="$(arg map_path)">
   <param name="frame_id" value="$(arg global_frame_id)"/>
  </node>

  <!-- AMCL -->
  <!-- <arg name="custom_amcl_launch_file" default="$(find turtlebot_navigation)/launch/includes/amcl/$(arg laser_type)_amcl.launch.xml"/> -->

  <!-- <arg name="initial_pose_x" default="-0.5"/>
  <arg name="initial_pose_y" default="9.6"/>
  <arg name="initial_pose_a" default="-1.35"/>

  <include file="$(arg custom_amcl_launch_file)">
    <arg name="initial_pose_x" value="$(arg initial_pose_x)"/>
    <arg name="initial_pose_y" value="$(arg initial_pose_y)"/>
    <arg name="initial_pose_a" value="$(arg initial_pose_a)"/>
  </include> -->


    <!-- use fake localization-->
  <include file="$(find sarl_star_ros)/launch/sublaunch/fake_localization.launch">
    <arg name="global_frame_id"   value="$(arg global_frame_id)"/>
    <arg name="odom_frame_id"     value="$(arg odom_frame_id)"/>
    <arg name="base_frame_id"     value="$(arg base_frame_id)"/>
    <arg name="odom_ground_truth" default="$(arg odom_ground_truth)"/>
  </include>

  <!-- Visualization -->
  <arg name="use_viz"         default="true"/>
  <param name="use_viz"       value="$(arg use_viz)"/>

 <!-- use simulator and rviz-->
  <include file="$(find sarl_star_ros)/launch/sublaunch/flatland_simulator.launch">
    <arg name="world_path"      value="$(arg world_path)"/>

    <arg name="update_rate"     default="10.0"/>
    <arg name="step_size"       default="0.05"/>

    <arg name="show_viz"        default="true"/>

    <arg name="viz_pub_rate"    default="10.0"/>
    <arg name="use_rviz"        default="$(arg use_viz)"/>  
    <arg name="train_mode"      default="false"/>
    <!-- <arg name="rviz_file"       value="$(arg rviz_file)"/> -->
  </include>

  <!-- People Detector -->
  <include file="$(find people_velocity_tracker)/launch/tracked_detector.launch" />

  <!-- Move base -->
  <!-- <arg name="custom_param_file" default="$(find turtlebot_navigation)/param/$(arg laser_type)_costmap_params.yaml"/>
  <include file="$(find turtlebot_navigation)/launch/includes/$(arg laser_type)_move_base.launch.xml">
    <arg name="custom_param_file" value="$(arg custom_param_file)"/>
  </include> -->

    <arg name="model" default="burger"/>
    <node pkg="move_base" type="move_base" respawn="false" name="move_base" output="screen">
        <param name="controller_frequency" value="10.0"/> 
        <param name="controller_patiente" value="10.0"/>
        <rosparam file="$(find conventional)/config/costmap_common_params_$(arg model).yaml" command="load" ns="global_costmap" />
        <rosparam file="$(find conventional)/config/costmap_common_params_$(arg model).yaml" command="load" ns="local_costmap" />   
        <rosparam file="$(find conventional)/config/local_costmap_params.yaml" command="load" />
        <rosparam file="$(find conventional)/config/global_costmap_params.yaml" command="load" />
    </node>

  <!-- SARL_star Planner -->
  <node pkg="sarl_star_ros" type="sarl_star_node.py" name="sarl_star_node" output="screen" />
  <remap from="/cmd_vel_mux/input/teleop" to="/cmd_vel"/>

  <!-- rviz -->
  <!-- <node pkg="rviz" type="rviz" name="rviz" args="-d $(find sarl_star_ros)/rviz/sarl_crowd_nav.rviz"/> -->




</launch>

